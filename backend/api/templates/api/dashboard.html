<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Think Thread Chatbot</title>

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- React and ReactDOM via CDN -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-light">
  <div id="root" style="height: 100vh;"></div>

  {% verbatim %}
  <script type="text/babel">
    function Chatbot() {
      const [messages, setMessages] = React.useState([
        { from: "bot", text: "Hi! How can I help you today?" },
      ]);
      const [input, setInput] = React.useState("");

      const sendMessage = () => {
        if (!input.trim()) return;
        setMessages([...messages, { from: "user", text: input }]);
        setInput("");
        // Simple fake bot reply after 1 sec
        setTimeout(() => {
          setMessages((prev) => [
            ...prev,
            { from: "bot", text: "Thanks for your message! (Demo reply)" },
          ]);
        }, 1000);
      };

      return (
        <div className="d-flex flex-column h-100">
          {/* Top Bar */}
          <nav className="navbar navbar-dark bg-primary">
            <div className="container-fluid">
              <span className="navbar-brand mb-0 h1">Think Thread</span>
            </div>
          </nav>

          {/* Chat Area */}
          <div className="flex-grow-1 d-flex flex-column" style={{ background: "#f9f9f9" }}>
            <div
              className="flex-grow-1 overflow-auto p-3"
              style={{ fontSize: "0.95rem" }}
            >
              {messages.map((msg, i) => (
                <div
                  key={i}
                  className={`mb-3 d-flex ${
                    msg.from === "user" ? "justify-content-end" : "justify-content-start"
                  }`}
                >
                  <div
                    className={`p-3 rounded-3 ${
                      msg.from === "user"
                        ? "bg-primary text-white"
                        : "bg-white border"
                    }`}
                    style={{ maxWidth: "70%" }}
                  >
                    {msg.text}
                  </div>
                </div>
              ))}
            </div>

            {/* Input Box */}
            <div className="border-top p-3 bg-white">
              <div className="input-group input-group-lg">
                <input
                  type="text"
                  className="form-control"
                  placeholder="Type your message..."
                  value={input}
                  onChange={(e) => setInput(e.target.value)}
                  onKeyDown={(e) => e.key === "Enter" && sendMessage()}
                />
                <button className="btn btn-primary" onClick={sendMessage}>
                  Send
                </button>
              </div>
            </div>
          </div>
        </div>
      );
    }

    function App() {
      return <Chatbot />;
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
  {% endverbatim %}

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
